<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="chrome">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/css/commonStyle.css">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
	<link rel="manifest" href="/json/manifest.json">
	<link rel="stylesheet" href="/css/setupStyle.css">

	<title>Sentinel</title>
</head>

<body>
	<header>
		<div class="hline">
			<h2>Setup</h2>
		</div>
	</header>

	<div class="button-group">
		<button class="button applyA" type="submit">설정</button>
	</div>
	<div class="applying-setup-option">
		<form action="/admin/menu/setup" method="post" onsubmit="return confirmSubmit()">
			<div class="input-group">
				<label for="dbNIC">DB NIC: </label>
				<input type="text" id="dbNIC" name="dbNIC"><br>
			</div>
			<div class="input-group">
				<label for="dbIP">DB IP: </label>
				<input type="text" id="dbIP" name="dbIP"><br>
			</div>
			<div class="input-group">
				<label for="dbPORT">DB Port: </label>
				<input type="text" id="dbPORT" name="dbPORT"><br>
			</div>
		</form>
	</div>

	<header>
		<div class="hline">
			<h2>비밀번호 변경</h2>
		</div>
	</header>

	<div class="button-group2">
		<button class="button2 applyB" type="submit">비밀번호 변경</button>
	</div>
	<div class="changing-key-word">
		<form action="/admin/menu/changePassword" method="post" onsubmit="return confirmPasswordChange()">
			<div class="input-group">
				<label for="currentPassword">현재 비밀번호: </label>
				<input type="password" id="currentPassword" name="currentPassword"><br>
			</div>
			<div class="input-group">
				<label for="newPassword">새로운 비밀번호: </label>
				<input type="password" id="newPassword" name="newPassword"><br>
			</div>
			<div class="input-group">
				<label for="confirmPassword">새로운 비밀번호 확인: </label>
				<input type="password" id="confirmPassword" name="confirmPassword"><br>
			</div>
		</form>
	</div>

	<script>
		function confirmSubmit() {
			var dbNIC = document.getElementById('dbNIC').value;
			var dbIP = document.getElementById('dbIP').value;
			var dbPORT = document.getElementById('dbPORT').value;

			if (dbNIC === '' || dbIP === '' || dbPORT === '') {
				alert("설정 입력창이 비어있습니다. 설정하실 내용을 입력해주세요.");
				return false;
			}
			return confirm("설정을 적용하시겠습니까?");
		}

		function confirmPasswordChange() {
			var currentPassword = document.getElementById('currentPassword').value;
			var newPassword = document.getElementById('newPassword').value;
			var confirmPassword = document.getElementById('confirmPassword').value;

			if (currentPassword === '' || newPassword === '' || confirmPassword === '') {
				alert("비밀번호 입력창이 비어있습니다. 비밀번호를 입력해주세요.");
				return false;
			}
			if (newPassword != confirmPassword) {
				alert("새로운 비밀번호와 비밀번호 확인이 일치하지 않습니다.");
				return false;
			}
			return confirm("비밀번호를 변경하시겠습니까?");
		}

		window.onload = function () {
			const urlParams = new URLSearchParams(window.location.search);
			const changePassword = urlParams.get('changePassword');
			if (changePassword === 'false') {
				alert('비밀번호 변경에 실패하였습니다.');
			} else if (changePassword === 'true') {
				alert('비밀번호 변경에 성공하였습니다.');
			}
		}
	</script>
</body>

</html>