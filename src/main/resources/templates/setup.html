<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/commonStyle.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <title>Sentinel</title>
</head>

<body>
    <h2>Setup</h2>
    
    <form action="/admin/menu/setup" method="post" onsubmit="return confirmSubmit()">
        <label for="dbNIC">DB NIC: </label>
        <input type="text" id="dbNIC" name="dbNIC"><br>
    
        <label for="dbIP">DB IP: </label>
        <input type="text" id="dbIP" name="dbIP"><br>
    
        <label for="dbPORT">DB Port: </label>
        <input type="text" id="dbPORT" name="dbPORT"><br>
        
        <button type="submit">설정</button>
    </form>
    
    <form action="/admin/menu/changePassword" method="post" onsubmit="return confirmPasswordChange()">
        <h3>비밀번호 변경</h3>
        <label for="currentPassword">현재 비밀번호: </label>
        <input type="password" id="currentPassword" name="currentPassword"><br>
        
        <label for="newPassword">새로운 비밀번호: </label>
        <input type="password" id="newPassword" name="newPassword"><br>
        
        <label for="confirmPassword">새로운 비밀번호 확인: </label>
        <input type="password" id="confirmPassword" name="confirmPassword"><br>
        
        <button type="submit">비밀번호 변경</button>
    </form>

    <script>
        function confirmSubmit() {
            return confirm("설정을 적용하시겠습니까?");
        }
        
        function confirmPasswordChange() {
	        var newPassword = document.getElementById('newPassword').value;
	        var confirmPassword = document.getElementById('confirmPassword').value;
	        
	        if (newPassword != confirmPassword) {
	            alert("새로운 비밀번호와 비밀번호 확인이 일치하지 않습니다.");
	            return false;
	        }
	        return confirm("비밀번호를 변경하시겠습니까?");
	    }
	    
	    window.onload = function() {
	        const urlParams = new URLSearchParams(window.location.search);
	        const changePassword = urlParams.get('changePassword');
	        if (changePassword === 'false') {
	            alert('비밀번호 변경에 실패하였습니다.');
	        } else if (changePassword === 'true') {
				alert('비밀번호 변경에 성공하였습니다.');
			}
	    }
    </script>
</body>

</html>